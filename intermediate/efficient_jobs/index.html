
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../transfer/">
      
      
        <link rel="next" href="../install/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Efficient jobs - Handling sensitive data at NAISS</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Lato";--md-code-font:"JetBrains Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#efficient-jobs" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Handling sensitive data at NAISS" class="md-header__button md-logo" aria-label="Handling sensitive data at NAISS" data-md-component="logo">
      
  <img src="../../logo/naiss_logo_white.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Handling sensitive data at NAISS
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Efficient jobs
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/UPPMAX/bianca_workshop" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../prereqs/" class="md-tabs__link">
        
  
  
    
  
  Prerequisites

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../beginner/intro/" class="md-tabs__link">
          
  
  
  Beginner

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../intro/" class="md-tabs__link">
          
  
  
  Intermediate

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../overview/" class="md-tabs__link">
          
  
  
  Extra material

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../communication/" class="md-tabs__link">
          
  
  
  Misc

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Handling sensitive data at NAISS" class="md-nav__button md-logo" aria-label="Handling sensitive data at NAISS" data-md-component="logo">
      
  <img src="../../logo/naiss_logo_white.png" alt="logo">

    </a>
    Handling sensitive data at NAISS
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/UPPMAX/bianca_workshop" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../prereqs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Prerequisites
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Beginner
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Beginner
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../beginner/intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../beginner/learning_outcomes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Learning outcomes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../beginner/course_dates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Course dates
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../beginner/schedule/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Schedule
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../beginner/sensitive_data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Working with sensitive data outside Bianca
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../beginner/naiss_sens/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    NAISS SENS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../beginner/login/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Login
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../beginner/login_remote_desktop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Log in to the Bianca remote desktop environment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../beginner/use_remote_desktop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Using the desktop environment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../beginner/login_console/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Log in to the Bianca console environment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../beginner/commandline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Command-line intro
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../beginner/create_script/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Create an executable script
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../beginner/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Module system
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../beginner/file_transfer_using_gui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Transferring files to/from Bianca using a graphical tool
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../beginner/slurm_intro_new/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Slurm
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../beginner/ides/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IDEs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../beginner/summary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Summary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../beginner/evaluation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Evaluation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Intermediate
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Intermediate
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../learning_outcomes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Learning outcomes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../course_dates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Course dates
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../schedule/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Schedule
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../gpu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    GPUs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../transfer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Transferring files to/from Bianca
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Efficient jobs
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Efficient jobs
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#why" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why?
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-are-efficient-jobs" class="md-nav__link">
    <span class="md-ellipsis">
      
        What are efficient jobs?
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="What are efficient jobs?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#booking-too-many-cores-for-memory-is-a-reasonable-thing-to-do" class="md-nav__link">
    <span class="md-ellipsis">
      
        Booking too many cores for memory is a reasonable thing to do
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#booking-more-cores-for-quicker-calculation-speed-may-be-useless" class="md-nav__link">
    <span class="md-ellipsis">
      
        Booking more cores for quicker calculation speed may be useless
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#booking-more-cores-for-quicker-calculation-speed-may-be-wasteful" class="md-nav__link">
    <span class="md-ellipsis">
      
        Booking more cores for quicker calculation speed may be wasteful
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercises" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercises
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercise-1-use-cases" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 1: use cases
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#question-1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Question 1
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#question-2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Question 2
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#question-3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Question 3
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#question-4" class="md-nav__link">
    <span class="md-ellipsis">
      
        Question 4
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#question-5" class="md-nav__link">
    <span class="md-ellipsis">
      
        Question 5
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#question-6" class="md-nav__link">
    <span class="md-ellipsis">
      
        Question 6
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Question 6">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exercise-2-creating-a-jobstats-plot" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 2: creating a jobstats plot
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Packages and software installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../summary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Summary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../evaluation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Evaluation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Extra material
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Extra material
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    The bigger picture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extra/transfer_basics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Transferring files to/from Bianca
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extra/slurm_intro_old/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction to compute nodes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../complex_jobs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Complex jobs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../replicate_jobs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Replicate jobs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extra/slurm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    More about Slurm
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extra/source_install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Build from source
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extra/conda/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Conda on Bianca
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extra/pip/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Install with pip to Bianca
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extra/rpackages/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installing R packages on Bianca
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extra/julia/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Using Julia packages on Bianca
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extra/containers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Containers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extra/devel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Own development and Git on Bianca
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Misc
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Misc
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../communication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Communication
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../evaluations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Evaluations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Frequently asked questions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lesson_plans/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lesson plans
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../meeting_notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Meeting notes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../misc/project/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Project
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reflections/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Reflections
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../misc/shared_document/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Shared document
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../shared_documents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Shared documents
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#why" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why?
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-are-efficient-jobs" class="md-nav__link">
    <span class="md-ellipsis">
      
        What are efficient jobs?
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="What are efficient jobs?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#booking-too-many-cores-for-memory-is-a-reasonable-thing-to-do" class="md-nav__link">
    <span class="md-ellipsis">
      
        Booking too many cores for memory is a reasonable thing to do
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#booking-more-cores-for-quicker-calculation-speed-may-be-useless" class="md-nav__link">
    <span class="md-ellipsis">
      
        Booking more cores for quicker calculation speed may be useless
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#booking-more-cores-for-quicker-calculation-speed-may-be-wasteful" class="md-nav__link">
    <span class="md-ellipsis">
      
        Booking more cores for quicker calculation speed may be wasteful
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercises" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercises
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercise-1-use-cases" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 1: use cases
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#question-1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Question 1
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#question-2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Question 2
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#question-3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Question 3
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#question-4" class="md-nav__link">
    <span class="md-ellipsis">
      
        Question 4
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#question-5" class="md-nav__link">
    <span class="md-ellipsis">
      
        Question 5
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#question-6" class="md-nav__link">
    <span class="md-ellipsis">
      
        Question 6
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Question 6">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exercise-2-creating-a-jobstats-plot" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 2: creating a jobstats plot
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
                



  


  <nav class="md-path" aria-label="Navigation" >
    <ol class="md-path__list">
      
        
  
  
    <li class="md-path__item">
      <a href="../.." class="md-path__link">
        
  <span class="md-ellipsis">
    Home
  </span>

      </a>
    </li>
  

      
      
        
  
  
    
    
      <li class="md-path__item">
        <a href="../intro/" class="md-path__link">
          
  <span class="md-ellipsis">
    Intermediate
  </span>

        </a>
      </li>
    
  

      
    </ol>
  </nav>

              
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/UPPMAX/bianca_workshop/blob/main/docs/intermediate/efficient_jobs/README.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/UPPMAX/bianca_workshop/raw/main/docs/intermediate/efficient_jobs/README.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


<h1 id="efficient-jobs">Efficient jobs<a class="headerlink" href="#efficient-jobs" title="Anchor link to this section for reference">&para;</a></h1>
<div class="admonition - info">
<p class="admonition-title">Learning outcomes</p>
<ul>
<li>Practice using the UPPMAX documentation</li>
<li>I can see the CPU and memory usage of jobs</li>
<li>I can read a <code>jobstats</code> plot</li>
<li>I can create a <code>jobstats</code> plot</li>
<li>I understand how to set up jobs efficiently</li>
</ul>
</div>
<details class="- question">
<summary>Want to see this session as a video?</summary>
<p>Watch the YouTube video
<a href="https://youtu.be/0FcREXUcOHc">'Intermediate Bianca workshop: efficient jobs'</a>.</p>
</details>
<details class="- question">
<summary>For teachers</summary>
<p>Teaching goals are:</p>
<ul>
<li>Learners have practiced using the UPPMAX documentation</li>
<li>Learners have seen the CPU and memory usage of jobs</li>
<li>Learners have read a <code>jobstats</code> plot</li>
<li>Learners have created a <code>jobstats</code> plot</li>
<li>Learners have discussed how to set up jobs efficiently</li>
</ul>
<p>Lesson plan:</p>
<pre class="mermaid"><code>gantt
  title Efficient jobs
  dateFormat X
  axisFormat %s
  section First hour
  Course introduction: done, course_intro, 0, 10s
  Prior : intro, after course_intro, 5s
  Present: theory_1, after intro, 5s
  Challenge: crit, exercise_1, after theory_1, 40s
  Break: crit, milestone, after exercise_1
  section Second hour
  Challenge: crit, exercise_2, 0, 10s
  Feedback: feedback_2, after exercise_2, 10s
  SLURM: done, slurm, after feedback_2, 25s
  Break: done, milestone, after slurm</code></pre>
<p>Prior questions:</p>
<ul>
<li>How to schedule jobs efficiently?</li>
<li>What is the <code>jobstats</code> tool?</li>
</ul>
<p>Present:</p>
<ul>
<li>?Show documentation</li>
</ul>
</details>
<h2 id="why">Why?<a class="headerlink" href="#why" title="Anchor link to this section for reference">&para;</a></h2>
<div class="admonition note">
<p class="admonition-title">Quote from the UPPMAX documentation</p>
<p>If everyone would use our computational resources effectively,
there would be no queue.</p>
<blockquote>
<p>From the UPPMAX documentation, original source unknown</p>
</blockquote>
</div>
<p>Running efficient jobs allows you to run more jobs that start running faster.</p>
<h2 id="what-are-efficient-jobs">What are efficient jobs?<a class="headerlink" href="#what-are-efficient-jobs" title="Anchor link to this section for reference">&para;</a></h2>
<p>Here we define an efficient job as a job that
makes good use of memory and processing power.</p>
<p>Each core you book gives both memory and processing power.</p>
<details class="- question">
<summary>What is the relation between node, CPU and core again?</summary>
<p>Here is a simplified picture of HPC cluster architecture:</p>
<pre class="mermaid"><code>flowchart TD
  subgraph hpc_cluster[HPC cluster]
    subgraph node_1[Node]
      subgraph cpu_1_1[CPU]
      core_1_1_1[Core]
      end
    end
  end</code></pre>
<p><!-- markdownlint-disable MD013 --><!-- Tables cannot be split up over lines, hence will break 80 characters per line --></p>
<table>
<thead>
<tr>
<th>Term</th>
<th>What it loosely is</th>
<th>Amount</th>
</tr>
</thead>
<tbody>
<tr>
<td>Core</td>
<td>Something that does a calculation</td>
<td>One or more per CPU</td>
</tr>
<tr>
<td>CPU</td>
<td>A collection of cores that share the same memory</td>
<td>One or more per node</td>
</tr>
<tr>
<td>Node</td>
<td>A collection of CPUs that share the same memory</td>
<td>One or more per HPC cluster</td>
</tr>
<tr>
<td>HPC cluster</td>
<td>A collection of nodes</td>
<td>One or more per universe</td>
</tr>
<tr>
<td>The universe <code>[1]</code></td>
<td>A collection of HPC clusters</td>
<td>One</td>
</tr>
</tbody>
</table>
<!-- markdownlint-enable MD013 -->
<ul>
<li><code>[1]</code> this is a pun to distributed parallelism</li>
</ul>
</details>
<h3 id="booking-too-many-cores-for-memory-is-a-reasonable-thing-to-do">Booking too many cores for memory is a reasonable thing to do<a class="headerlink" href="#booking-too-many-cores-for-memory-is-a-reasonable-thing-to-do" title="Anchor link to this section for reference">&para;</a></h3>
<p>Memory is the most important resource of the two:
if you schedule too little memory, your calculation will crash.
This is worse than that your calculation will take longer.
You have already found out how much memory your calculations need
by trial-and-error :-) . You have probably been pragmatic
and booked too much cores, just to make sure that it works:
which is fine! In this session, we'll <strong>visualize</strong> how much cores
you actually need to book, so that you can confidently book less
cores per job, so that you can do more calculations that will start faster!</p>
<p>Here is a visualisation of a user that booked too many cores:</p>
<p><img alt="Visualisation of a user that booked too many cores" src="jobstats_c_555912-l_1-k_bad_job_01_with_border.png" /></p>
<h3 id="booking-more-cores-for-quicker-calculation-speed-may-be-useless">Booking more cores for quicker calculation speed may be useless<a class="headerlink" href="#booking-more-cores-for-quicker-calculation-speed-may-be-useless" title="Anchor link to this section for reference">&para;</a></h3>
<p>Programs can <strong>sometimes</strong> use multiple cores to speed up its calculation.
The idea is to let multiple cores each do their own part of the total
calculation. Such programs are called 'programs that allow parallel
computation'.
In this session, I call these <strong>multithreaded programs</strong>
(a simplification that is not entirely technically correct).
Where multithreaded programs can use multiple cores,
<strong>singlethreaded program</strong> cannot. For singlethreaded programs,
booking more cores to speed up the calculation is useless.</p>
<p>There are multiple ways to find out if a program can use multiple cores:</p>
<ul>
<li>Measure the number of cores used during a calculation
  (which is what we will do in this session)</li>
<li>Read the documentation of the program</li>
<li>Measure the speed increase by using multiple cores.
  This is called <strong>benchmarking</strong>.
  When a benchmark shows that there is no speed
  increase for multiple cores, it can be concluded that
  the program cannot use multiple cores.</li>
</ul>
<p>Here is a visualisation of a user that booked multiple cores
for a singlethreaded program:</p>
<p><img alt="Visualisation of a user that booked too many cores" src="jobstats_example_1.png" /></p>
<h3 id="booking-more-cores-for-quicker-calculation-speed-may-be-wasteful">Booking more cores for quicker calculation speed may be wasteful<a class="headerlink" href="#booking-more-cores-for-quicker-calculation-speed-may-be-wasteful" title="Anchor link to this section for reference">&para;</a></h3>
<p>The most efficient use of core hours is having 1 core working on a calculation:</p>
<ul>
<li>The 1 core never needs to ask other cores if they are done</li>
<li>The 1 core is never waiting for other cores to finish</li>
</ul>
<p>If we book more cores to work on the same calculation there is <strong>overhead</strong>:</p>
<ul>
<li>The main core need to ask other cores if they are done</li>
<li>Some cores need to wait for other cores to finish their part of the
  calculation</li>
</ul>
<p>Overhead is wasted resources, hence you want to have overhead
for the right reasons. Good reasons are:</p>
<ul>
<li>You are in a hurry, so you need the calculation to go faster</li>
<li>Your calculation takes 11 days, where Bianca allows jobs of maximimal
  10 days. Instead of dealing with an interruption, booking an extra core
  may solve the problem</li>
</ul>
<p>When booking more cores -say twice as much- your program will not go
twice as fast. Below is a table of a worked-out example giving some numbers:</p>
<table>
<thead>
<tr>
<th>Program runtime</th>
<th>Number of cores</th>
<th>Time</th>
<th>Speedup</th>
<th>Efficiency</th>
</tr>
</thead>
<tbody>
<tr>
<td><img alt="1 core" src="amdahls_law_example_1.png" /></td>
<td>1</td>
<td>16</td>
<td>100%</td>
<td>100%</td>
</tr>
<tr>
<td><img alt="2 cores" src="amdahls_law_example_2.png" /></td>
<td>2</td>
<td>10</td>
<td>160%</td>
<td>80%</td>
</tr>
<tr>
<td><img alt="3 cores" src="amdahls_law_example_3.png" /></td>
<td>3</td>
<td>8</td>
<td>200%</td>
<td>60%</td>
</tr>
<tr>
<td><img alt="4 cores" src="amdahls_law_example_4.png" /></td>
<td>4</td>
<td>7</td>
<td>229%</td>
<td>48%</td>
</tr>
<tr>
<td><img alt="6 cores" src="amdahls_law_example_6.png" /></td>
<td>6</td>
<td>6</td>
<td>267%</td>
<td>33%</td>
</tr>
<tr>
<td>.</td>
<td>12</td>
<td>5</td>
<td>320%</td>
<td>18%</td>
</tr>
<tr>
<td>.</td>
<td>24</td>
<td>4.5</td>
<td>356%</td>
<td>9%</td>
</tr>
<tr>
<td>.</td>
<td>48</td>
<td>4.25</td>
<td>376%</td>
<td>5%</td>
</tr>
</tbody>
</table>
<p>The details behind this table can be found at
<a href="https://uppmax.github.io/R-matlab-julia-HPC/advanced/parallel_computing/">the 'Parallel computing' session of the R-MATLAB-Julia course</a>.</p>
<h2 id="exercises">Exercises<a class="headerlink" href="#exercises" title="Anchor link to this section for reference">&para;</a></h2>
<h2 id="exercise-1-use-cases">Exercise 1: use cases<a class="headerlink" href="#exercise-1-use-cases" title="Anchor link to this section for reference">&para;</a></h2>
<h2 id="question-1">Question 1<a class="headerlink" href="#question-1" title="Anchor link to this section for reference">&para;</a></h2>
<p>For your research project, you need to run a lot of calculations.
Each calculation takes 10 hours. How do you make optimal use
of your computational resources?</p>
<details class="tip">
<summary>Answer</summary>
<p>Run the calculation on a single core for 100% efficiency</p>
</details>
<h2 id="question-2">Question 2<a class="headerlink" href="#question-2" title="Anchor link to this section for reference">&para;</a></h2>
<p>For your research project, you also have a calculation that takes 11 days.
Your HPC cluster allows a calculation of at most 10 days.
Assume your HPC center will not extend your job
(they will probably do so when asked: we are there to help!).
How do you make optimal use of your computational resources?</p>
<details class="tip">
<summary>Answer</summary>
<p>If your calculation already has parallelism built-in,
then run the calculation on two cores: this only involves changing your
Slurm script, with a low loss of computational resources.</p>
<p>If you are a really tight on computational resources, you can
implement a 'save state' in your calculation, so that you can schedule
two runs of nine days in succession, each with 100% efficiency.</p>
<p>Alternatively, you can added thread parallelism to allow running
with multiple cores.</p>
</details>
<h2 id="question-3">Question 3<a class="headerlink" href="#question-3" title="Anchor link to this section for reference">&para;</a></h2>
<p>Your colleague runs many jobs with a lot of cores. 'It is way faster!',
he/she states. That same colleague, however, also complains about long
waiting times before his/her jobs start. How would you explain this
situation?</p>
<details class="tip">
<summary>Answer</summary>
<p>The colleague used up (or: 'wasted') all his/her computational resources
(commonly 10,000 core hours per month on UPPMAX).</p>
<p>Due to this, his/her jobs are only run when the HPC cluster
has a low workload and activates the so-called 'bonus queue' (UPPMAX)
or generally have to wait for their priority to go up again.</p>
</details>
<h2 id="question-4">Question 4<a class="headerlink" href="#question-4" title="Anchor link to this section for reference">&para;</a></h2>
<p>Your colleague needs to finish his/her analysis quickly
and starts scheduling multiple cores for his/her jobs.
After some measurements, he/she concludes that the calculation does not finish
faster at all.
How would you explain this situation?
What would you advise him/her?</p>
<details class="tip">
<summary>Answer</summary>
<p>The colleague is trying to run a singlethreaded calculation,
i.e. a calculation that cannot use multiple cores.</p>
<p>You should advise to go back to scheduling single-core jobs
directly, to prevent his/her jobs from being in the queue longer.</p>
</details>
<h2 id="question-5">Question 5<a class="headerlink" href="#question-5" title="Anchor link to this section for reference">&para;</a></h2>
<p>You are using a program that is known to be single-threaded.
You does not want to schedule more cores than needed.
However, you know that you need to schedule 10 cores
for the program to run at all.
Is there a way you can use your computational resources more efficiently?</p>
<details class="tip">
<summary>Answer</summary>
<p>No.</p>
<p>If you need 10 cores for the memory it provides,
than that is what is needed.</p>
<p>Sure, 9 core are not helping with the calculation at all,
which is acceptable here.</p>
</details>
<h2 id="question-6">Question 6<a class="headerlink" href="#question-6" title="Anchor link to this section for reference">&para;</a></h2>
<p>For years, you have been using a pipeline with multiple
steps that use different tools.
Some of these tools recommend to use 16 cores,
so you have booked 16 cores for the whole process.</p>
<p>Due to this session, you decided to measure the job statistics of this job
and you find the following graph:</p>
<p><img alt="Question 6" src="jobstats_c_555912-l_1-k_bad_job_05_with_border.png" /></p>
<p>After seeing this graph, how much course will you book in the future?</p>
<details class="- question">
<summary>Answer</summary>
<p>If you want to make best use of your core hours, use 1 core:
the calculation takes around 130 minutes by 16 cores.
Assuming that on average 8 cores are actually doing work, this
calculation will then take 130 minutes * 8 cores less = 1040 minutes
for 1 core = around 18 hours.</p>
<p>If you want to be a bit faster, use between 2-8 cores,
as the calculation uses 8 cores on average. Using 8 cores here
is reasonable use.</p>
</details>
<h3 id="exercise-2-creating-a-jobstats-plot">Exercise 2: creating a <code>jobstats</code> plot<a class="headerlink" href="#exercise-2-creating-a-jobstats-plot" title="Anchor link to this section for reference">&para;</a></h3>
<p>We are going to create a <code>jobstats</code> plot. For that, we need a job
to plot. Here we first look for a job, after which we plot it.</p>
<ul>
<li>Scan <a href="https://docs.uppmax.uu.se/software/finishedjobinfo/">the UPPMAX <code>finishedjobinfo</code> documentation</a></li>
<li>Log in to <strong>your own Bianca project</strong> where you have had a run
  of at least 1 hour</li>
<li>Find a job that has finished successfully that took longer than one hour
  (if there is none, use the job the ran longest)</li>
</ul>
<details class="- question">
<summary>Answer</summary>
<p>From <a href="https://docs.uppmax.uu.se/software/finishedjobinfo/">the UPPMAX <code>finishedjobinfo</code> documentation</a>,
here is a code snippet to find jobs that have completed and took longer
than an hour:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>finishedjobinfo<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-E<span class="w"> </span><span class="s2">&quot;runtime.([0-9]-)?[0-9][1-9]&quot;</span>
</code></pre></div>
<p>If there is no job that is long enough, use:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>finishedjobinfo<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>COMPLETED
</code></pre></div>
<p>Look for a job that has a high <code>runtime</code> value, such as the one below.
The runtime must be above 5 minutes for this to work.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="m">2025</span>-11-17<span class="w"> </span><span class="m">13</span>:21:38<span class="w"> </span><span class="nv">jobid</span><span class="o">=</span><span class="m">368</span><span class="w"> </span><span class="nv">jobstate</span><span class="o">=</span>COMPLETED<span class="w"> </span><span class="nv">username</span><span class="o">=</span>richel<span class="w"> </span><span class="nv">account</span><span class="o">=</span>sens2025560<span class="w"> </span><span class="nv">nodes</span><span class="o">=</span>sens2025560-b9<span class="w"> </span><span class="nv">procs</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">partition</span><span class="o">=</span>core<span class="w"> </span><span class="nv">qos</span><span class="o">=</span>normal<span class="w"> </span><span class="nv">jobname</span><span class="o">=</span>do_r_2d_integration.sh<span class="w"> </span><span class="nv">maxmemory_in_GiB</span><span class="o">=</span><span class="m">0</span>.1<span class="w"> </span><span class="nv">maxmemory_node</span><span class="o">=</span>sens2025560-b9<span class="w"> </span><span class="nv">timelimit</span><span class="o">=</span><span class="m">02</span>:00:00<span class="w"> </span><span class="nv">submit_time</span><span class="o">=</span><span class="m">2025</span>-11-17T13:15:31<span class="w"> </span><span class="nv">start_time</span><span class="o">=</span><span class="m">2025</span>-11-17T13:15:52<span class="w"> </span><span class="nv">end_time</span><span class="o">=</span><span class="m">2025</span>-11-17T13:21:38<span class="w"> </span><span class="nv">runtime</span><span class="o">=</span><span class="m">00</span>:05:46<span class="w"> </span><span class="nv">margin</span><span class="o">=</span><span class="m">01</span>:54:14<span class="w"> </span><span class="nv">queuetime</span><span class="o">=</span><span class="m">00</span>:00:21
</code></pre></div>
<p>Press <code>CTRL-C</code> to stop the process: it will take very long to finish.</p>
</details>
<ul>
<li>Read <a href="https://docs.uppmax.uu.se/software/jobstats/">the UPPMAX <code>jobstats</code> documentation</a>,
  create a <code>jobstats</code> plot of that job</li>
</ul>
<details class="- question">
<summary>Answer</summary>
<p>Here is the general answer:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>jobstats<span class="w"> </span>--plot<span class="w"> </span><span class="o">[</span>job_id<span class="o">]</span>
</code></pre></div>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>jobstats<span class="w"> </span>--plot<span class="w"> </span><span class="m">368</span>
</code></pre></div>
</details>
<ul>
<li><code>jobstats</code> has created a plot and saved it as file
  <code>bianca-[project_name]-[username]-[job_id].png</code>,
  for example, <code>bianca-sens2025560-sven-368.png</code>.
  Download the <code>jobstats</code> plot and view it.</li>
</ul>
<details class="- question">
<summary>Answer</summary>
<p>Here is an example plot:</p>
<p><img alt="The bianca-sens2025560-richel-368 plot" src="bianca-sens2025560-richel-368.png" /></p>
</details>
<ul>
<li>Was that a job that was set up well? If not, how should it be setup? Why?</li>
</ul>
<details class="- question">
<summary>Answer</summary>
<p>We don't know. The user uses all CPU power perfectly and
there is enough memory available.</p>
<p>The user may benefit from more CPUs, as the program may be
CPU limited.</p>
<p>It may be that the program used is designed to use
all the scheduled cores maximally,
hence scheduling that amount of cores is perfect!</p>
<p>It may be that using less cores is a strategy of the user:
using multiple cores always brings computational overhead
and hence wasted CPU resources.</p>
</details>
<ul>
<li>Does the quote at the start of this sessions ('If everyone would use our
  computational resources effectively, there would be no queue') apply to
  the job you just investigated?</li>
</ul>
<details class="- question">
<summary>Answer</summary>
<p>No.</p>
</details>
<details class="- question">
<summary>How was the example plot generated?</summary>
<p>Using the benchmark script from
<a href="https://uppmax.github.io/R-matlab-julia-HPC/advanced/thread_parallelism/">the R-Julia-MATLAB course, session 'thread parallelism'</a>.</p>
</details>







  
  






                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../transfer/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Transferring files to/from Bianca">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Transferring files to/from Bianca
              </div>
            </div>
          </a>
        
        
          
          <a href="../install/" class="md-footer__link md-footer__link--next" aria-label="Next: Packages and software installation">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Packages and software installation
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.path", "navigation.footer", "search.suggest", "content.code.annotate", "content.code.copy", "content.tabs.link", "content.action.edit", "content.action.view"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>